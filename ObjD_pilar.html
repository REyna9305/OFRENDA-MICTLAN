<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pilar con sombras, var, mesh y set()</title>
</head>
<body>
  <canvas id="myCanvas"></canvas>

<script type="importmap"> 
{
  "imports": {
    "three": "./js/three.module.js",
    "three/OrbitControls": "./js/OrbitControls.js"
  }
}
</script>

<script type="module">
import * as THREE from 'three';
import { OrbitControls } from 'three/OrbitControls';

// üé• Renderer
var renderer = new THREE.WebGLRenderer({
  canvas: document.getElementById('myCanvas'),
  antialias: true
});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setClearColor(0x87CEEB);
renderer.shadowMap.enabled = true;

//  Escena
var scene = new THREE.Scene();

//  C√°mara
var camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 2000);
camera.position.set(10, 8, 15);
scene.add(camera);

//  Controles
var controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.05;

//  Luces
var luzDireccional = new THREE.DirectionalLight(0xffffff, 1);
luzDireccional.position.set(10, 20, 10);
luzDireccional.castShadow = true;
scene.add(luzDireccional);

var luzAmbiente = new THREE.AmbientLight(0xffffff, 0.4);
scene.add(luzAmbiente);

// Piso
var geometryPiso = new THREE.BoxGeometry(20, 0.3, 20);
var materialPiso = new THREE.MeshStandardMaterial({ color: 0x4dd0e1 });
var meshPiso = new THREE.Mesh(geometryPiso, materialPiso);
meshPiso.position.set(0, -0.3, 0);
meshPiso.receiveShadow = true;
scene.add(meshPiso);

// Pilar completo

// Base inferior cuadrada
var geometryBase = new THREE.BoxGeometry(3, 0.5, 3);
var materialBase = new THREE.MeshStandardMaterial({ color: 0x8d6e63 });
var meshBase = new THREE.Mesh(geometryBase, materialBase);
meshBase.position.set(0, 0.25, 0);
meshBase.castShadow = true;
meshBase.receiveShadow = true;
//scene.add(meshBase);

// Cuerpo (cilindro central)
var geometryCuerpo = new THREE.CylinderGeometry(0.8, 0.8, 6, 32);
var materialCuerpo = new THREE.MeshStandardMaterial({ color: 0xbca28b });
var meshCuerpo = new THREE.Mesh(geometryCuerpo, materialCuerpo);
meshCuerpo.position.set(0, 3.5, 0);
meshCuerpo.castShadow = true;
meshCuerpo.receiveShadow = true;
//scene.add(meshCuerpo);

// (cuadro ancho)
var geometryCapitel = new THREE.BoxGeometry(2.5, 0.5, 2.5);
var materialCapitel = new THREE.MeshStandardMaterial({ color: 0x5d4037 });
var meshCapitel = new THREE.Mesh(geometryCapitel, materialCapitel);
meshCapitel.position.set(0, 6.5, 0);
meshCapitel.castShadow = true;
meshCapitel.receiveShadow = true;
//scene.add(meshCapitel);

// clon 
var meshCapitel2 = meshCapitel.clone();
meshCapitel2.position.set(0, 7.2, 0);
meshCapitel2.castShadow = true;
meshCapitel2.receiveShadow = true;
//scene.add(meshCapitel2);

// Cilindros (anillos)
var geometryAnillo = new THREE.CylinderGeometry(1.2, 1.2, 0.4, 32);
var materialAnillo = new THREE.MeshStandardMaterial({ color: 0x9e7b6d });
var meshAnilloSuperior = new THREE.Mesh(geometryAnillo, materialAnillo);
meshAnilloSuperior.position.set(0, 6.2, 0);
meshAnilloSuperior.castShadow = true;
meshAnilloSuperior.receiveShadow = true;
//scene.add(meshAnilloSuperior);

// Clon decorativo inferior
var meshAnilloInferior = meshAnilloSuperior.clone();
meshAnilloInferior.position.set(0, 0.6, 0);
meshAnilloInferior.castShadow = true;
meshAnilloInferior.receiveShadow = true;
//scene.add(meshAnilloInferior);

//GrupPilar
var PilarGrup = new THREE.Group();
    PilarGrup.add(meshBase,meshCuerpo,meshCapitel,meshCapitel2,meshAnilloInferior,meshAnilloSuperior);
    scene.add(PilarGrup);

// üéûÔ∏è Animaci√≥n
function render() {
  controls.update();
  renderer.render(scene, camera);
  requestAnimationFrame(render);
}
render();

</script>
</body>
</html>
